---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: control-plane
  namespace: cloud-cluster
spec:
  chart:
    spec:
      chart: charts/k8s-control-plane
      reconcileStrategy: Revision
      sourceRef:
        kind: GitRepository
        name: home-cluster
        namespace: flux-system
  interval: 1h
  values:
    apiServer:
      service:
        annotations:
          external-dns.alpha.kubernetes.io/hostname: cloud-cluster.samcday.com
        spec:
          type: LoadBalancer
          loadBalancerClass: io.cilium/l2-announcer
    clusterName: cloud
    etcd:
      endpoints: [https://etcd.kube-system.svc.home-cluster.local:2379]
    serviceCIDRs: [172.33.0.0/16]
