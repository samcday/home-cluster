kind: postgresql
apiVersion: acid.zalan.do/v1
metadata:
  name: public-db
  namespace: postgres
spec:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: samcday.com/cloud
          operator: Exists
  numberOfInstances: 2
  postgresql:
    version: "15"
  preparedDatabases:
    invidious:
      defaultUsers: true
      schemas:
        public: {}
      secretNamespace: invidious
    # mastodon:
    #   defaultUsers: true
    #   schemas:
    #     public: {}
    #   secretNamespace: mastodon
  teamId: public
  tolerations:
    - key: samcday.com/cloud
      effect: NoExecute
  volume:
    storageClass: syncthing
    size: 10Gi
